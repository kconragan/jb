angular.module("app",["ui.router","ngAnimate","angular-carousel","templatescache","ngTextTruncate","projects"]).run(function(){FastClick.attach(document.body)}),angular.module("projects",[]),angular.module("app").config(["$stateProvider","$urlRouterProvider",function(t,e){e.otherwise("/projects"),t.state("projectList",{url:"/projects",controller:"ProjectsCtrl",templateUrl:"projects/projects.html"}).state("projectDetail",{url:"/projects/:id",controller:"ProjectCtrl",templateUrl:"projects/project.html"})}]),angular.module("app").controller("ViewController",["$scope",function(t){t.layoutConfig={fullBleed:"fullbleed"}}]).controller("ProjectsCtrl",["$scope","$http","$filter","dataService",function(t,e,o,r){t.layoutConfig.fullbleed="fullbleed",r.getAlbums().then(function(e){t.projects=e,t.predicate="-modified"})}]).controller("ProjectCtrl",["$scope","$stateParams","dataService",function(t,e,o){t.layoutConfig.fullbleed="",t.$on("$stateChangeSuccess",function(){}),o.getAlbumPhotos(e.id).then(function(e){t.currentArtwork=6,t.title=e.title,t.description=e.description,t.masthead=e.masthead,t.photos=e.photos}),t.updateLightbox=function(e){t.currentArtwork=e}}]),angular.module("app").directive("lightboxTrigger",["$timeout",function(t){"use strict";return{link:function(e,o,r){o.bind("click",function(){e.$apply(function(){e.currentArtwork=r.currentIndex,$(".lightbox").removeClass("is-hidden")}),t(function(){},200)})}}}]).directive("contactToggle",function(){"use strict";return{link:function(t,e){e.bind("click",function(){$("#app").addClass("is-hidden"),$("#contact").addClass("is-visible")})}}}).directive("closeAbout",function(){"use strict";return{link:function(t,e){e.bind("click",function(){$("#app").removeClass("is-hidden"),$("#contact").removeClass("is-visible")})}}}).directive("masthead",["$timeout",function(t){"use strict";return{scope:{bar:"=url"},link:function(e,o){$(window).height()+"px";e.$watch("bar",function(e){void 0!==e&&$("<img/>").attr("src",e).load(function(){$(this).remove(),o.addClass("is-loaded"),$(".project-abstract").addClass("is-loaded"),t(function(){$(".masthead .more").addClass("bounce-slowly")},3500)})})}}}]).directive("closeLightbox",[function(){"use strict";return{link:function(t,e){e.bind("click",function(){$(".lightbox").addClass("is-hidden"),t.$apply(function(){t.updateLightbox(0)})})}}}]).directive("ripple",[function(){"use strict";return{link:function(t,e){e.bind("click",function(t){console.log("trigger ripple");var e=$("<div/>"),o=$(this).offset(),r=t.pageX-o.left,i=t.pageY-o.top;e.addClass("ripple-effect");var n=$(".ripple-effect");n.css("height",$(this).height()),n.css("width",$(this).height()),e.css({top:i-n.height()/2,left:r-n.width()/2,background:$(this).data("ripple-color")}).appendTo($(this)),window.setTimeout(function(){e.remove()},2e3)})}}}]).directive("scroll",["$window",function(t){function e(){return window.pageYOffset||document.documentElement.scrollTop}return function(){var o=0,r=0,i=$("header.header");angular.element(t).bind("scroll",function(){var t=$(this).scrollTop();t>o?t>0&&(i.hasClass("is-hidden")||r>0&&(i.addClass("is-hidden"),i.removeClass("is-filled"),r=0)):(console.log("scrolling up"),r++,r>2&&(i.removeClass("is-hidden"),i.hasClass("transparent")&&(t>$(window).height()?i.addClass("is-filled"):i.removeClass("is-filled")))),o=e()})}}]);var GOOGLEID="112223276805962705555";angular.module("projects",[]).factory("dataService",["$http","$q",function(t,e){var o="https://picasaweb.google.com/data/feed/api/user/"+GOOGLEID+"/?alt=json";return _createPiasaPhotoUrl=function(t,e){var o=t.split("/"),r=o[0]+"//"+o[2]+"/"+o[3]+"/"+o[4]+"/"+o[5]+"/"+o[6]+"/s1280/"+o[7];return r},{getAlbums:function(){var r=e.defer(),i=[];return t.get(o).success(function(e){var o=e.feed.entry;_.sortBy(o,function(t){var e=new Date(t.updated.$t);return e.getTime()}).reverse(),_.each(o,function(e){var o={};o.id=e.gphoto$id.$t,o.title=e.title.$t,o.modified=e.updated.$t,o.thumbUrl=e.link[0].href,"Profile Photos"!==o.title&&t.get(o.thumbUrl).success(function(t){o.thumb=_createPiasaPhotoUrl(t.feed.entry[0].content.src),i.push(o)}).error(function(t){console.log(t)})}),r.resolve(i)}).error(function(){r.reject}),r.promise},getAlbumThumb:function(){},getAlbumPhotos:function(o){var r={},i="https://picasaweb.google.com/data/feed/api/user/"+GOOGLEID+"/albumid/"+o+"?alt=json&?imgmax=912",n=e.defer();return t.get(i).success(function(t){r.title=t.feed.title.$t,r.masthead=_createPiasaPhotoUrl(t.feed.entry[0].content.src);for(var e=[],o=0;o<t.feed.entry.length;o++){var i=t.feed.entry[o];""!==i.summary.$t&&""!==r.description&&(r.description=i.summary.$t);var s=i.content.src.split("/"),c=s[0]+"//"+s[2]+"/"+s[3]+"/"+s[4]+"/"+s[5]+"/"+s[6]+"/w1200-h1200-c/"+s[7],l=s[0]+"//"+s[2]+"/"+s[3]+"/"+s[4]+"/"+s[5]+"/"+s[6]+"/s1640/"+s[7];i.url=c,i.bigUrl=l,e.push(i)}r.photos=e,n.resolve(r)}).error(function(){n.reject}),n.promise}}}]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1vZHVsZS5qcyIsInByb2plY3RzL21vZHVsZS5qcyIsInJvdXRlcy5qcyIsInByb2plY3RzL3Byb2plY3RzLmNvbnRyb2xsZXIuanMiLCJwcm9qZWN0cy9wcm9qZWN0cy5kaXJlY3RpdmVzLmpzIiwicHJvamVjdHMvcHJvamVjdHMuc2VydmljZS5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxRQUFBLE9BQUEsT0FDQSxZQUNBLFlBQ0EsbUJBQ0EsaUJBQ0EsaUJBQ0EsYUFFQSxJQUFBLFdBQ0EsVUFBQSxPQUFBLFNBQUEsUUNUQSxRQUFBLE9BQUEsZUNBQSxRQUFBLE9BQUEsT0FDQSxRQUFBLGlCQUFBLHFCQUFBLFNBQUEsRUFBQSxHQUNBLEVBQUEsVUFBQSxhQUNBLEVBQ0EsTUFBQSxlQUNBLElBQUEsWUFDQSxXQUFBLGVBQ0EsWUFBQSwyQkFFQSxNQUFBLGlCQUNBLElBQUEsZ0JBQ0EsV0FBQSxjQUNBLFlBQUEsNkJDWEEsUUFBQSxPQUFBLE9BQ0EsV0FBQSxrQkFBQSxTQUFBLFNBQUEsR0FDQSxFQUFBLGNBQ0EsVUFBQSxnQkFHQSxXQUFBLGdCQUFBLFNBQUEsUUFBQSxVQUFBLGNBQUEsU0FBQSxFQUFBLEVBQUEsRUFBQSxHQUNBLEVBQUEsYUFBQSxVQUFBLFlBQ0EsRUFBQSxZQUFBLEtBQUEsU0FBQSxHQUNBLEVBQUEsU0FBQSxFQUNBLEVBQUEsVUFBQSxpQkFHQSxXQUFBLGVBQUEsU0FBQSxlQUFBLGNBQUEsU0FBQSxFQUFBLEVBQUEsR0FHQSxFQUFBLGFBQUEsVUFBQSxHQUVBLEVBQUEsSUFBQSxzQkFBQSxjQUlBLEVBQUEsZUFBQSxFQUFBLElBQUEsS0FBQSxTQUFBLEdBQ0EsRUFBQSxlQUFBLEVBQ0EsRUFBQSxNQUFBLEVBQUEsTUFDQSxFQUFBLFlBQUEsRUFBQSxZQUNBLEVBQUEsU0FBQSxFQUFBLFNBQ0EsRUFBQSxPQUFBLEVBQUEsU0FHQSxFQUFBLGVBQUEsU0FBQSxHQUNBLEVBQUEsZUFBQSxNQ2hDQSxRQUFBLE9BQUEsT0FDQSxVQUFBLG1CQUFBLFdBQUEsU0FBQSxHQUNBLFlBQ0EsUUFDQSxLQUFBLFNBQUEsRUFBQSxFQUFBLEdBQ0EsRUFBQSxLQUFBLFFBQUEsV0FDQSxFQUFBLE9BQUEsV0FFQSxFQUFBLGVBQUEsRUFBQSxhQUNBLEVBQUEsYUFBQSxZQUFBLGVBRUEsRUFBQSxhQUNBLFlBS0EsVUFBQSxnQkFBQSxXQUNBLFlBQ0EsUUFDQSxLQUFBLFNBQUEsRUFBQSxHQUNBLEVBQUEsS0FBQSxRQUFBLFdBQ0EsRUFBQSxRQUFBLFNBQUEsYUFDQSxFQUFBLFlBQUEsU0FBQSxvQkFLQSxVQUFBLGFBQUEsV0FDQSxZQUNBLFFBQ0EsS0FBQSxTQUFBLEVBQUEsR0FDQSxFQUFBLEtBQUEsUUFBQSxXQUNBLEVBQUEsUUFBQSxZQUFBLGFBQ0EsRUFBQSxZQUFBLFlBQUEsb0JBS0EsVUFBQSxZQUFBLFdBQUEsU0FBQSxHQUNBLFlBQ0EsUUFDQSxPQUNBLElBQUEsUUFFQSxLQUFBLFNBQUEsRUFBQSxHQU1BLEVBQUEsUUFBQSxTQUFBLElBRUEsR0FBQSxPQUFBLE1BQUEsU0FBQSxHQUNBLFNBQUEsR0FDQSxFQUFBLFVBQUEsS0FBQSxNQUFBLEdBQUEsS0FBQSxXQUNBLEVBQUEsTUFBQSxTQUtBLEVBQUEsU0FBQSxhQUVBLEVBQUEscUJBQUEsU0FBQSxhQUNBLEVBQUEsV0FDQSxFQUFBLG1CQUFBLFNBQUEsa0JBQ0EsZUFRQSxVQUFBLGlCQUFBLFdBQ0EsWUFDQSxRQUNBLEtBQUEsU0FBQSxFQUFBLEdBQ0EsRUFBQSxLQUFBLFFBQUEsV0FDQSxFQUFBLGFBQUEsU0FBQSxhQUNBLEVBQUEsT0FBQSxXQUNBLEVBQUEsZUFBQSxZQU1BLFVBQUEsVUFBQSxXQUNBLFlBQ0EsUUFDQSxLQUFBLFNBQUEsRUFBQSxHQUVBLEVBQUEsS0FBQSxRQUFBLFNBQUEsR0FFQSxRQUFBLElBQUEsaUJBRUEsSUFBQSxHQUFBLEVBQUEsVUFDQSxFQUFBLEVBQUEsTUFBQSxTQUNBLEVBQUEsRUFBQSxNQUFBLEVBQUEsS0FDQSxFQUFBLEVBQUEsTUFBQSxFQUFBLEdBR0EsR0FBQSxTQUFBLGdCQUNBLElBQUEsR0FBQSxFQUFBLGlCQUVBLEdBQUEsSUFBQSxTQUFBLEVBQUEsTUFBQSxVQUNBLEVBQUEsSUFBQSxRQUFBLEVBQUEsTUFBQSxVQUNBLEVBQUEsS0FDQSxJQUFBLEVBQUEsRUFBQSxTQUFBLEVBQ0EsS0FBQSxFQUFBLEVBQUEsUUFBQSxFQUNBLFdBQUEsRUFBQSxNQUFBLEtBQUEsa0JBRUEsU0FBQSxFQUFBLE9BRUEsT0FBQSxXQUFBLFdBQ0EsRUFBQSxVQUNBLFlBT0EsVUFBQSxVQUFBLFVBQUEsU0FBQSxHQUNBLFFBQUEsS0FDQSxNQUFBLFFBQUEsYUFBQSxTQUFBLGdCQUFBLFVBRUEsTUFBQSxZQUVBLEdBQUEsR0FBQSxFQUNBLEVBQUEsRUFFQSxFQUFBLEVBQUEsZ0JBQ0EsU0FBQSxRQUFBLEdBQUEsS0FBQSxTQUFBLFdBQ0EsR0FBQSxHQUFBLEVBQUEsTUFBQSxXQUVBLEdBQUEsRUFDQSxFQUFBLElBQ0EsRUFBQSxTQUFBLGNBQ0EsRUFBQSxJQUNBLEVBQUEsU0FBQSxhQUNBLEVBQUEsWUFBQSxhQUNBLEVBQUEsS0FNQSxRQUFBLElBQUEsZ0JBQ0EsSUFDQSxFQUFBLElBQ0EsRUFBQSxZQUFBLGFBQ0EsRUFBQSxTQUFBLGlCQUNBLEVBQUEsRUFBQSxRQUFBLFNBQ0EsRUFBQSxTQUFBLGFBR0EsRUFBQSxZQUFBLGdCQUtBLEVBQUEsU0NoS0EsSUFBQSxVQUFBLHVCQUVBLFNBQUEsT0FBQSxlQUNBLFFBQUEsZUFBQSxRQUFBLEtBQUEsU0FBQSxFQUFBLEdBRUEsR0FBQSxHQUFBLG1EQUFBLFNBQUEsWUFTQSxPQVBBLHNCQUFBLFNBQUEsRUFBQSxHQUNBLEdBQ0EsR0FBQSxFQUFBLE1BQUEsS0FDQSxFQUFBLEVBQUEsR0FBQSxLQUFBLEVBQUEsR0FBQSxJQUFBLEVBQUEsR0FBQSxJQUFBLEVBQUEsR0FBQSxJQUFBLEVBQUEsR0FBQSxJQUFBLEVBQUEsR0FBQSxVQUFBLEVBQUEsRUFDQSxPQUFBLEtBU0EsVUFBQSxXQUdBLEdBQUEsR0FBQSxFQUFBLFFBQ0EsSUE0Q0EsT0F6Q0EsR0FBQSxJQUFBLEdBQUEsUUFBQSxTQUFBLEdBQ0EsR0FBQSxHQUFBLEVBQUEsS0FBQSxLQUtBLEdBQUEsT0FBQSxFQUFBLFNBQUEsR0FDQSxHQUFBLEdBQUEsR0FBQSxNQUFBLEVBQUEsUUFBQSxHQUNBLE9BQUEsR0FBQSxZQUNBLFVBR0EsRUFBQSxLQUFBLEVBQUEsU0FBQSxHQUVBLEdBQUEsS0FFQSxHQUFBLEdBQUEsRUFBQSxVQUFBLEdBQ0EsRUFBQSxNQUFBLEVBQUEsTUFBQSxHQUNBLEVBQUEsU0FBQSxFQUFBLFFBQUEsR0FDQSxFQUFBLFNBQUEsRUFBQSxLQUFBLEdBQUEsS0FHQSxtQkFBQSxFQUFBLE9BS0EsRUFBQSxJQUFBLEVBQUEsVUFBQSxRQUFBLFNBQUEsR0FFQSxFQUFBLE1BQUEscUJBQUEsRUFBQSxLQUFBLE1BQUEsR0FBQSxRQUFBLEtBQ0EsRUFBQSxLQUFBLEtBRUEsTUFBQSxTQUFBLEdBQ0EsUUFBQSxJQUFBLE9BR0EsRUFBQSxRQUFBLEtBRUEsTUFBQSxXQUNBLEVBQUEsU0FFQSxFQUFBLFNBR0EsY0FBQSxhQUdBLGVBQUEsU0FBQSxHQUVBLEdBQUEsTUFFQSxFQUFBLG1EQUFBLFNBQUEsWUFBQSxFQUFBLHdCQUNBLEVBQUEsRUFBQSxPQW1DQSxPQWxDQSxHQUFBLElBQUEsR0FBQSxRQUFBLFNBQUEsR0FDQSxFQUFBLE1BQUEsRUFBQSxLQUFBLE1BQUEsR0FDQSxFQUFBLFNBQUEscUJBQUEsRUFBQSxLQUFBLE1BQUEsR0FBQSxRQUFBLElBRUEsS0FBQSxHQURBLE1BQ0EsRUFBQSxFQUFBLEVBQUEsRUFBQSxLQUFBLE1BQUEsT0FBQSxJQUFBLENBRUEsR0FBQSxHQUFBLEVBQUEsS0FBQSxNQUFBLEVBTUEsTUFBQSxFQUFBLFFBQUEsSUFBQSxLQUFBLEVBQUEsY0FDQSxFQUFBLFlBQUEsRUFBQSxRQUFBLEdBR0EsSUFBQSxHQUFBLEVBQUEsUUFBQSxJQUFBLE1BQUEsS0FFQSxFQUFBLEVBQUEsR0FBQSxLQUFBLEVBQUEsR0FBQSxJQUFBLEVBQUEsR0FBQSxJQUFBLEVBQUEsR0FBQSxJQUFBLEVBQUEsR0FBQSxJQUFBLEVBQUEsR0FBQSxrQkFBQSxFQUFBLEdBQ0EsRUFBQSxFQUFBLEdBQUEsS0FBQSxFQUFBLEdBQUEsSUFBQSxFQUFBLEdBQUEsSUFBQSxFQUFBLEdBQUEsSUFBQSxFQUFBLEdBQUEsSUFBQSxFQUFBLEdBQUEsVUFBQSxFQUFBLEVBQ0EsR0FBQSxJQUFBLEVBQ0EsRUFBQSxPQUFBLEVBRUEsRUFBQSxLQUFBLEdBR0EsRUFBQSxPQUFBLEVBRUEsRUFBQSxRQUFBLEtBR0EsTUFBQSxXQUNBLEVBQUEsU0FFQSxFQUFBIiwiZmlsZSI6ImFwcC5qcyIsInNvdXJjZXNDb250ZW50IjpbImFuZ3VsYXIubW9kdWxlKCdhcHAnLCBbXG4gICd1aS5yb3V0ZXInLFxuICAnbmdBbmltYXRlJyxcbiAgJ2FuZ3VsYXItY2Fyb3VzZWwnLFxuICAndGVtcGxhdGVzY2FjaGUnLFxuICAnbmdUZXh0VHJ1bmNhdGUnLFxuICAncHJvamVjdHMnXG5dKVxuLnJ1bihmdW5jdGlvbigpIHtcbiAgRmFzdENsaWNrLmF0dGFjaChkb2N1bWVudC5ib2R5KTtcbn0pO1xuIiwiYW5ndWxhci5tb2R1bGUoJ3Byb2plY3RzJywgW10pXG4iLCJhbmd1bGFyLm1vZHVsZSgnYXBwJylcbi5jb25maWcoZnVuY3Rpb24oJHN0YXRlUHJvdmlkZXIsICR1cmxSb3V0ZXJQcm92aWRlcikge1xuICAkdXJsUm91dGVyUHJvdmlkZXIub3RoZXJ3aXNlKCcvcHJvamVjdHMnKTtcbiAgJHN0YXRlUHJvdmlkZXJcbiAgICAuc3RhdGUoJ3Byb2plY3RMaXN0Jywge1xuICAgICAgdXJsICAgICAgICAgOiAnL3Byb2plY3RzJyxcbiAgICAgIGNvbnRyb2xsZXIgIDogJ1Byb2plY3RzQ3RybCcsXG4gICAgICB0ZW1wbGF0ZVVybCA6ICdwcm9qZWN0cy9wcm9qZWN0cy5odG1sJ1xuICAgIH0pXG4gICAgLnN0YXRlKCdwcm9qZWN0RGV0YWlsJywge1xuICAgICAgdXJsICAgICAgICAgOiAnL3Byb2plY3RzLzppZCcsXG4gICAgICBjb250cm9sbGVyICA6ICdQcm9qZWN0Q3RybCcsXG4gICAgICB0ZW1wbGF0ZVVybCA6ICdwcm9qZWN0cy9wcm9qZWN0Lmh0bWwnXG4gICAgfSlcbn0pXG4iLCIndXNlIHN0cmljdCdcbmFuZ3VsYXIubW9kdWxlKCdhcHAnKVxuICAuY29udHJvbGxlcignVmlld0NvbnRyb2xsZXInLCBmdW5jdGlvbigkc2NvcGUpIHtcbiAgICAkc2NvcGUubGF5b3V0Q29uZmlnID0ge1xuICAgICAgZnVsbEJsZWVkIDogJ2Z1bGxibGVlZCdcbiAgICB9XG4gIH0pXG4gIC5jb250cm9sbGVyKCdQcm9qZWN0c0N0cmwnLCBmdW5jdGlvbiAoJHNjb3BlLCAkaHR0cCwgJGZpbHRlciwgZGF0YVNlcnZpY2UpIHtcbiAgICAkc2NvcGUubGF5b3V0Q29uZmlnLmZ1bGxibGVlZCA9ICdmdWxsYmxlZWQnO1xuICAgIGRhdGFTZXJ2aWNlLmdldEFsYnVtcygpLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICRzY29wZS5wcm9qZWN0cyAgICAgICA9IGRhdGE7XG4gICAgICAkc2NvcGUucHJlZGljYXRlICAgICAgPSAnLW1vZGlmaWVkJztcbiAgICB9KTtcbiAgfSlcbiAgLmNvbnRyb2xsZXIoJ1Byb2plY3RDdHJsJywgZnVuY3Rpb24oJHNjb3BlLCAkc3RhdGVQYXJhbXMsIGRhdGFTZXJ2aWNlKSB7XG4gICAgLy8gY29uc29sZS5sb2coJHN0YXRlUGFyYW1zLmlkKTtcbiAgICBcbiAgICAkc2NvcGUubGF5b3V0Q29uZmlnLmZ1bGxibGVlZCA9ICcnO1xuICAgIFxuICAgICRzY29wZS4kb24oJyRzdGF0ZUNoYW5nZVN1Y2Nlc3MnLCBmdW5jdGlvbiAoZXZlbnQsIHRvU3RhdGUpIHtcbiAgICAgIC8vIGNvbnNvbGUubG9nKGV2ZW50LCB0b1N0YXRlKTtcbiAgICB9KTtcblxuICAgIGRhdGFTZXJ2aWNlLmdldEFsYnVtUGhvdG9zKCRzdGF0ZVBhcmFtcy5pZCkudGhlbihmdW5jdGlvbihkYXRhKSB7XG4gICAgICAkc2NvcGUuY3VycmVudEFydHdvcmsgPSA2O1xuICAgICAgJHNjb3BlLnRpdGxlICAgICAgICAgID0gZGF0YS50aXRsZTtcbiAgICAgICRzY29wZS5kZXNjcmlwdGlvbiAgICA9IGRhdGEuZGVzY3JpcHRpb247XG4gICAgICAkc2NvcGUubWFzdGhlYWQgICAgICAgPSBkYXRhLm1hc3RoZWFkO1xuICAgICAgJHNjb3BlLnBob3RvcyAgICAgICAgID0gZGF0YS5waG90b3M7XG4gICAgfSk7XG4gICAgXG4gICAgJHNjb3BlLnVwZGF0ZUxpZ2h0Ym94ID0gZnVuY3Rpb24oaW5kZXgpIHtcbiAgICAgICRzY29wZS5jdXJyZW50QXJ0d29yayA9IGluZGV4O1xuICAgIH1cbn0pXG4iLCJhbmd1bGFyLm1vZHVsZSgnYXBwJylcbiAgLmRpcmVjdGl2ZSgnbGlnaHRib3hUcmlnZ2VyJywgWyckdGltZW91dCcsIGZ1bmN0aW9uICgkdGltZW91dCkge1xuICAgICd1c2Ugc3RyaWN0JztcbiAgICByZXR1cm4ge1xuICAgICAgbGluazogZnVuY3Rpb24gKHNjb3BlLCBlbGVtZW50LCBhdHRycykge1xuICAgICAgICBlbGVtZW50LmJpbmQoJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHNjb3BlLiRhcHBseShmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAvLyBzY29wZS51cGRhdGVMaWdodGJveChhdHRycy5jdXJyZW50SW5kZXgpO1xuICAgICAgICAgICAgc2NvcGUuY3VycmVudEFydHdvcmsgPSBhdHRycy5jdXJyZW50SW5kZXg7XG4gICAgICAgICAgICAkKCcubGlnaHRib3gnKS5yZW1vdmVDbGFzcygnaXMtaGlkZGVuJyk7XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgJHRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgIH0sIDIwMCk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH07XG4gIH1dKVxuICAuZGlyZWN0aXZlKCdjb250YWN0VG9nZ2xlJywgZnVuY3Rpb24oKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuICAgIHJldHVybiB7XG4gICAgICBsaW5rOiBmdW5jdGlvbihzY29wZSwgZWxlbWVudCwgYXR0cnMpIHtcbiAgICAgICAgZWxlbWVudC5iaW5kKCdjbGljaycsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICQoJyNhcHAnKS5hZGRDbGFzcygnaXMtaGlkZGVuJyk7XG4gICAgICAgICAgJCgnI2NvbnRhY3QnKS5hZGRDbGFzcygnaXMtdmlzaWJsZScpO1xuICAgICAgICB9KVxuICAgICAgfVxuICAgIH1cbiAgfSlcbiAgLmRpcmVjdGl2ZSgnY2xvc2VBYm91dCcsIGZ1bmN0aW9uKCkge1xuICAgICd1c2Ugc3RyaWN0JztcbiAgICByZXR1cm4ge1xuICAgICAgbGluazogZnVuY3Rpb24oc2NvcGUsIGVsZW1lbnQsIGF0dHJzKSB7XG4gICAgICAgIGVsZW1lbnQuYmluZCgnY2xpY2snLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAkKCcjYXBwJykucmVtb3ZlQ2xhc3MoJ2lzLWhpZGRlbicpO1xuICAgICAgICAgICQoJyNjb250YWN0JykucmVtb3ZlQ2xhc3MoJ2lzLXZpc2libGUnKTtcbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICB9XG4gIH0pXG4gIC5kaXJlY3RpdmUoJ21hc3RoZWFkJywgZnVuY3Rpb24gKCR0aW1lb3V0KSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuICAgIHJldHVybiB7XG4gICAgICBzY29wZSA6IHtcbiAgICAgICAgYmFyIDogJz11cmwnXG4gICAgICB9LFxuICAgICAgbGluayA6IGZ1bmN0aW9uKHNjb3BlLCBlbGVtZW50LCBhdHRyaWJ1dGVzKSB7XG4gICAgICAgIC8qXG4gICAgICAgICAqICBCYXNpY2FsbHksIHdlJ3JlIGxvb2tpbmcgdG8gc2VlIHdoZW4gdGhlIG1haW5cbiAgICAgICAgICogIG1hc3RoZWFkIGltYWdlIGxvYWRzLiBPbmNlIGl0IGRvZXMsIHdlIGZpcmUgb2ZmIGFcbiAgICAgICAgICogIHNlcmllcyBvZiBhbmltYXRpb25zLlxuICAgICAgICAgKi9cbiAgICAgICAgdmFyIGhlaWdodCA9ICQod2luZG93KS5oZWlnaHQoKSArICdweCc7XG4gICAgICAgIFxuICAgICAgICBzY29wZS4kd2F0Y2goJ2JhcicsIGZ1bmN0aW9uKHZhbHVlKXtcbiAgICAgICAgICBpZih2YWx1ZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAkKCc8aW1nLz4nKS5hdHRyKCdzcmMnLCB2YWx1ZSkubG9hZChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgJCh0aGlzKS5yZW1vdmUoKTsgLy8gcHJldmVudCBtZW1vcnkgbGVha3NcbiAgICAgICAgICAgICAgLy8gQW5pbWF0ZSBjb250YWluZXIgYW5kIGltYWdlXG4gICAgICAgICAgICAgIC8vIC5pcy1sb2FkZWQgc2V0cyBvZiBhbmltYXRpb25zIGZvciB0ZXh0IGVsZW1lbnRzXG4gICAgICAgICAgICAgIC8vIHRoYXQgYXJlIGNoaWxkcmVuIG9mIC5tYXN0aGVhZFxuICAgICAgICAgICAgICAvLyBlbGVtZW50LmNzcyh7J2hlaWdodCcgOiBoZWlnaHR9KTtcbiAgICAgICAgICAgICAgZWxlbWVudC5hZGRDbGFzcygnaXMtbG9hZGVkJyk7XG4gICAgICAgICAgICAgIC8vIEFuaW1hdGUgYWJzdHJhY3QgaWYgaXQgZXhpc3RzXG4gICAgICAgICAgICAgICQoJy5wcm9qZWN0LWFic3RyYWN0JykuYWRkQ2xhc3MoJ2lzLWxvYWRlZCcpO1xuICAgICAgICAgICAgICAkdGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAkKCcubWFzdGhlYWQgLm1vcmUnKS5hZGRDbGFzcygnYm91bmNlLXNsb3dseScpO1xuICAgICAgICAgICAgICB9LCAzNTAwKTtcbiAgICAgICAgICAgICAgLy8gQW5pbWF0ZSBpbWFnZSBncmlkXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH07XG4gIH0pXG4gIC5kaXJlY3RpdmUoJ2Nsb3NlTGlnaHRib3gnLCBbZnVuY3Rpb24gKCkge1xuICAgICd1c2Ugc3RyaWN0JztcbiAgICByZXR1cm4ge1xuICAgICAgbGluayA6IGZ1bmN0aW9uIChzY29wZSwgZWxlbWVudCkge1xuICAgICAgICBlbGVtZW50LmJpbmQoJ2NsaWNrJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgJCgnLmxpZ2h0Ym94JykuYWRkQ2xhc3MoJ2lzLWhpZGRlbicpO1xuICAgICAgICAgIHNjb3BlLiRhcHBseShmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBzY29wZS51cGRhdGVMaWdodGJveCgwKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfTtcbiAgfV0pXG4gIC5kaXJlY3RpdmUoJ3JpcHBsZScsIFtmdW5jdGlvbiAoKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuICAgIHJldHVybiB7XG4gICAgICBsaW5rIDogZnVuY3Rpb24oc2NvcGUsIGVsZW1lbnQsIGF0dHJzKSB7XG4gICAgICAgIFxuICAgICAgICBlbGVtZW50LmJpbmQoJ2NsaWNrJywgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgXG4gICAgICAgICAgY29uc29sZS5sb2coJ3RyaWdnZXIgcmlwcGxlJyk7XG4gICAgICAgICAgXG4gICAgICAgICAgdmFyICRkaXYgICAgICA9ICQoJzxkaXYvPicpLFxuICAgICAgICAgICAgICBidG5PZmZzZXQgPSAkKHRoaXMpLm9mZnNldCgpLFxuICAgICAgICAgICAgICB4UG9zICAgICAgPSBldmVudC5wYWdlWCAtIGJ0bk9mZnNldC5sZWZ0LFxuICAgICAgICAgICAgICB5UG9zICAgICAgPSBldmVudC5wYWdlWSAtIGJ0bk9mZnNldC50b3A7XG4gICAgICAgICAgICAgIFxuICAgICAgICAgIFxuICAgICAgICAgICAgJGRpdi5hZGRDbGFzcygncmlwcGxlLWVmZmVjdCcpO1xuICAgICAgICAgICAgdmFyICRyaXBwbGUgPSAkKFwiLnJpcHBsZS1lZmZlY3RcIik7XG4gICAgICAgICAgXG4gICAgICAgICAgICAkcmlwcGxlLmNzcyhcImhlaWdodFwiLCAkKHRoaXMpLmhlaWdodCgpKTtcbiAgICAgICAgICAgICRyaXBwbGUuY3NzKFwid2lkdGhcIiwgJCh0aGlzKS5oZWlnaHQoKSk7XG4gICAgICAgICAgICAkZGl2LmNzcyh7XG4gICAgICAgICAgICAgIHRvcDogeVBvcyAtICgkcmlwcGxlLmhlaWdodCgpLzIpLFxuICAgICAgICAgICAgICBsZWZ0OiB4UG9zIC0gKCRyaXBwbGUud2lkdGgoKS8yKSxcbiAgICAgICAgICAgICAgYmFja2dyb3VuZDogJCh0aGlzKS5kYXRhKFwicmlwcGxlLWNvbG9yXCIpXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLmFwcGVuZFRvKCQodGhpcykpO1xuICAgICAgICAgIFxuICAgICAgICAgICAgd2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgJGRpdi5yZW1vdmUoKTtcbiAgICAgICAgICAgIH0sIDIwMDApO1xuXG4gICAgICAgIH0pO1xuXG4gICAgICB9XG4gICAgfTtcbiAgfV0pXG4gIC5kaXJlY3RpdmUoXCJzY3JvbGxcIiwgZnVuY3Rpb24gKCR3aW5kb3cpIHtcbiAgICBmdW5jdGlvbiBnZXRDdXJyZW50U2Nyb2xsKCkge1xuICAgICAgcmV0dXJuIHdpbmRvdy5wYWdlWU9mZnNldCB8fCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wO1xuICAgIH1cbiAgICByZXR1cm4gZnVuY3Rpb24oc2NvcGUsIGVsZW1lbnQsIGF0dHJzKSB7XG4gICAgICBcbiAgICAgIHZhciBwcmV2aW91c1Njcm9sbCA9IDA7XG4gICAgICB2YXIgc2Nyb2xsQ291bnRlciAgPSAwO1xuICAgICAgXG4gICAgICB2YXIgJGhlYWRlciA9ICQoJ2hlYWRlci5oZWFkZXInKTtcbiAgICAgIGFuZ3VsYXIuZWxlbWVudCgkd2luZG93KS5iaW5kKFwic2Nyb2xsXCIsIGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgY3VycmVudFNjcm9sbCA9ICQodGhpcykuc2Nyb2xsVG9wKCk7XG4gICAgICAgIFxuICAgICAgICBpZihjdXJyZW50U2Nyb2xsID4gcHJldmlvdXNTY3JvbGwpIHtcbiAgICAgICAgICBpZihjdXJyZW50U2Nyb2xsID4gMCkge1xuICAgICAgICAgICAgaWYoISRoZWFkZXIuaGFzQ2xhc3MoJ2lzLWhpZGRlbicpKSB7XG4gICAgICAgICAgICAgIGlmKHNjcm9sbENvdW50ZXIgPiAwKSB7XG4gICAgICAgICAgICAgICAgJGhlYWRlci5hZGRDbGFzcygnaXMtaGlkZGVuJyk7XG4gICAgICAgICAgICAgICAgJGhlYWRlci5yZW1vdmVDbGFzcygnaXMtZmlsbGVkJyk7XG4gICAgICAgICAgICAgICAgc2Nyb2xsQ291bnRlciA9IDA7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgY29uc29sZS5sb2coJ3Njcm9sbGluZyB1cCcpO1xuICAgICAgICAgIHNjcm9sbENvdW50ZXIrKztcbiAgICAgICAgICBpZihzY3JvbGxDb3VudGVyID4gMikge1xuICAgICAgICAgICAgJGhlYWRlci5yZW1vdmVDbGFzcygnaXMtaGlkZGVuJyk7XG4gICAgICAgICAgICBpZigkaGVhZGVyLmhhc0NsYXNzKCd0cmFuc3BhcmVudCcpKSB7XG4gICAgICAgICAgICAgIGlmKGN1cnJlbnRTY3JvbGwgPiAkKHdpbmRvdykuaGVpZ2h0KCkpIHtcbiAgICAgICAgICAgICAgICAkaGVhZGVyLmFkZENsYXNzKCdpcy1maWxsZWQnKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAkaGVhZGVyLnJlbW92ZUNsYXNzKCdpcy1maWxsZWQnKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBwcmV2aW91c1Njcm9sbCA9IGdldEN1cnJlbnRTY3JvbGwoKTtcbiAgICAgIH0pO1xuICAgIH07XG59KTtcbiIsIid1c2Ugc3RyaWN0JztcblxudmFyIEdPT0dMRUlEID0gJzExMjIyMzI3NjgwNTk2MjcwNTU1NSc7XG5cbmFuZ3VsYXIubW9kdWxlKCdwcm9qZWN0cycsIFtdKVxuICAuZmFjdG9yeSgnZGF0YVNlcnZpY2UnLCBmdW5jdGlvbigkaHR0cCwgJHEpIHtcblxuICAgIHZhciBhbGJ1bXNVUkwgPSAnaHR0cHM6Ly9waWNhc2F3ZWIuZ29vZ2xlLmNvbS9kYXRhL2ZlZWQvYXBpL3VzZXIvJyArIEdPT0dMRUlEICsgJy8/YWx0PWpzb24nO1xuICAgIFxuICAgIF9jcmVhdGVQaWFzYVBob3RvVXJsPSBmdW5jdGlvbihpZCwgc2l6ZSkge1xuICAgICAgdmFyIHNpemUgPSBzaXplIHx8ICdzMTI4MCc7XG4gICAgICB2YXIgdGVtcFVybCA9IGlkLnNwbGl0KCcvJyk7XG4gICAgICB2YXIgdXJsID0gdGVtcFVybFswXSArICcvLycgKyB0ZW1wVXJsWzJdICsgJy8nICsgdGVtcFVybFszXSArICcvJyArIHRlbXBVcmxbNF0gKyAnLycgKyB0ZW1wVXJsWzVdICsgJy8nICsgdGVtcFVybFs2XSArICcvczEyODAvJyArIHRlbXBVcmxbN107XG4gICAgICByZXR1cm4gdXJsXG4gICAgfVxuXG4gICAgcmV0dXJuIHtcblxuICAgICAgLypcbiAgICAgICAqIGdldEFsYnVtcyBmZXRjaGVzIGFsbCBhbGJ1bXMgZnJvbSBQaWNhc2F3ZWIgZm9yIGEgZ2l2ZW5cbiAgICAgICAqIHVzZXIgaWQgYW5kIHJldHVybnMgYXMgYSBsaXN0XG4gICAgICAgKi9cbiAgICAgIGdldEFsYnVtcyA6IGZ1bmN0aW9uKCkge1xuICAgICAgICBcbiAgICAgICAgLy8gQ3JlYXRlIHByb21pc2VcbiAgICAgICAgdmFyIGRlZmVycmVkID0gJHEuZGVmZXIoKTtcbiAgICAgICAgdmFyIGFsYnVtcyA9IFtdO1xuICAgICAgICBcbiAgICAgICAgLy8gU2VuZCBpbml0aWFsIHJlcXVlc3RcbiAgICAgICAgJGh0dHAuZ2V0KGFsYnVtc1VSTCkuc3VjY2VzcyhmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgdmFyIHByb2plY3RzID0gZGF0YS5mZWVkLmVudHJ5O1xuICAgICAgICAgIFxuICAgICAgICAgIC8vIEN1cnJlbnRseSBzb3J0aW5nIHByb2plY3RzIGJ5IGxhc3QgdXBkYXRlZFxuICAgICAgICAgIC8vIFRoaXMgaXMgYSBoYWNrIHVudGlsIHdlIGNhbiBmaWd1cmUgb3V0IGEgbW9yZVxuICAgICAgICAgIC8vIGRldGVybWluaXN0aWMgd2F5IHRvIGVzdGFibGlzaCBzb3J0aW5nXG4gICAgICAgICAgXy5zb3J0QnkocHJvamVjdHMsIGZ1bmN0aW9uIChvYmopIHtcbiAgICAgICAgICAgIHZhciBkID0gbmV3IERhdGUob2JqLnVwZGF0ZWQuJHQpO1xuICAgICAgICAgICAgcmV0dXJuIGQuZ2V0VGltZSgpO1xuICAgICAgICAgIH0pLnJldmVyc2UoKTtcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBPcmdhbml6ZSBlYWNoIHByb2plY3RcbiAgICAgICAgICBfLmVhY2gocHJvamVjdHMsIGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdmFyIGFsYnVtID0ge307XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGFsYnVtLmlkICAgICAgID0gZGF0YS5ncGhvdG8kaWQuJHQ7XG4gICAgICAgICAgICBhbGJ1bS50aXRsZSAgICA9IGRhdGEudGl0bGUuJHQ7XG4gICAgICAgICAgICBhbGJ1bS5tb2RpZmllZCA9IGRhdGEudXBkYXRlZC4kdDtcbiAgICAgICAgICAgIGFsYnVtLnRodW1iVXJsID0gZGF0YS5saW5rWzBdLmhyZWY7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIERvbid0IHByb2Nlc3MgUHJvZmlsZSBQaG90b3MgYWxidW0sIHdoaWNoIGlzIGFsd2F5cyBwdWJsaWNcbiAgICAgICAgICAgIGlmKGFsYnVtLnRpdGxlID09PSAnUHJvZmlsZSBQaG90b3MnKSB7XG4gICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gRmV0Y2ggY292ZXIgaW1hZ2UgZm9yIHRoZSBhbGJ1bVxuICAgICAgICAgICAgJGh0dHAuZ2V0KGFsYnVtLnRodW1iVXJsKS5zdWNjZXNzKGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgIC8vIGFsYnVtLnRodW1iID0gcmVzcG9uc2UuZmVlZC5lbnRyeVswXS5jb250ZW50LnNyYztcbiAgICAgICAgICAgICAgYWxidW0udGh1bWIgPSBfY3JlYXRlUGlhc2FQaG90b1VybChyZXNwb25zZS5mZWVkLmVudHJ5WzBdLmNvbnRlbnQuc3JjKTtcbiAgICAgICAgICAgICAgYWxidW1zLnB1c2goYWxidW0pO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5lcnJvcihmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKGUpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZShhbGJ1bXMpO1xuICAgICAgICB9KVxuICAgICAgICAuZXJyb3IoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgZGVmZXJyZWQucmVqZWN0O1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG4gICAgICB9LFxuICAgICAgXG4gICAgICBnZXRBbGJ1bVRodW1iIDogZnVuY3Rpb24oaWQpIHtcbiAgICAgIH0sXG5cbiAgICAgIGdldEFsYnVtUGhvdG9zIDogZnVuY3Rpb24oaWQpIHtcblxuICAgICAgICB2YXIgcHJvamVjdCA9IHt9O1xuXG4gICAgICAgIHZhciBhbGJ1bVVSTCA9ICdodHRwczovL3BpY2FzYXdlYi5nb29nbGUuY29tL2RhdGEvZmVlZC9hcGkvdXNlci8nICsgR09PR0xFSUQgKyAnL2FsYnVtaWQvJyArIGlkICsgJz9hbHQ9anNvbiY/aW1nbWF4PTkxMic7XG4gICAgICAgIHZhciBkZWZlcnJlZCA9ICRxLmRlZmVyKCk7XG4gICAgICAgICRodHRwLmdldChhbGJ1bVVSTCkuc3VjY2VzcyhmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgcHJvamVjdC50aXRsZSA9IGRhdGEuZmVlZC50aXRsZS4kdDtcbiAgICAgICAgICBwcm9qZWN0Lm1hc3RoZWFkID0gX2NyZWF0ZVBpYXNhUGhvdG9VcmwoZGF0YS5mZWVkLmVudHJ5WzBdLmNvbnRlbnQuc3JjKTtcbiAgICAgICAgICB2YXIgcGhvdG9zID0gW107XG4gICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBkYXRhLmZlZWQuZW50cnkubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdmFyIGl0ZW0gPSBkYXRhLmZlZWQuZW50cnlbaV07XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIFNlZSBpZiBhbiBpbWFnZSBoYXMgYSBjYXB0aW9uLiBJZiBzbywgdXNlIGFzIGFsYnVtIGRlY3NjcmlwdGlvbi5cbiAgICAgICAgICAgIC8vIFRoaXMgaXMgc3VwZXIgaGFja3kuIEkgbmVlZCB0byBmaW5kIGEgd2F5IHRvIGFsbG93IGFsYnVtLWxldmVsXG4gICAgICAgICAgICAvLyBkZXNjcmlwdGlvbnMgYnV0IGl0IGRvZXNuJ3QgY29tZSBiYWNrIGluIHRoZSBwaWNhc3dlYiBhcGkuXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmIChpdGVtLnN1bW1hcnkuJHQgIT09ICcnICYmIHByb2plY3QuZGVzY3JpcHRpb24gIT09ICcnKSB7XG4gICAgICAgICAgICAgIHByb2plY3QuZGVzY3JpcHRpb24gPSBpdGVtLnN1bW1hcnkuJHQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHZhciB0ZW1wVXJsID0gaXRlbS5jb250ZW50LnNyYy5zcGxpdCgnLycpO1xuXG4gICAgICAgICAgICB2YXIgdXJsID0gdGVtcFVybFswXSArICcvLycgKyB0ZW1wVXJsWzJdICsgJy8nICsgdGVtcFVybFszXSArICcvJyArIHRlbXBVcmxbNF0gKyAnLycgKyB0ZW1wVXJsWzVdICsgJy8nICsgdGVtcFVybFs2XSArICcvdzEyMDAtaDEyMDAtYy8nICsgdGVtcFVybFs3XTtcbiAgICAgICAgICAgIHZhciBiaWdVcmwgPSB0ZW1wVXJsWzBdICsgJy8vJyArIHRlbXBVcmxbMl0gKyAnLycgKyB0ZW1wVXJsWzNdICsgJy8nICsgdGVtcFVybFs0XSArICcvJyArIHRlbXBVcmxbNV0gKyAnLycgKyB0ZW1wVXJsWzZdICsgJy9zMTY0MC8nICsgdGVtcFVybFs3XTtcbiAgICAgICAgICAgIGl0ZW0udXJsID0gdXJsO1xuICAgICAgICAgICAgaXRlbS5iaWdVcmwgPSBiaWdVcmw7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHBob3Rvcy5wdXNoKGl0ZW0pO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHByb2plY3QucGhvdG9zID0gcGhvdG9zO1xuXG4gICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZShwcm9qZWN0KTtcbiAgICAgICAgICAvLyByZXR1cm4gcmVzdWx0LmRhdGE7XG4gICAgICAgIH0pXG4gICAgICAgIC5lcnJvcihmdW5jdGlvbigpIHtcbiAgICAgICAgICBkZWZlcnJlZC5yZWplY3Q7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcbiAgICAgIH1cbiAgICB9O1xuICB9KTtcbiJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==